<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ä¹ å‘†å‘†-é¸£æ½®è²æ¯”</title>
    <meta name="color-scheme" content="light dark" />
    <style>
      :root {
        --bg: #f6f7fb;
        --surface: #fff;
        --text: #1b1e27;
        --muted: #6b7280;
        --outline: rgba(20, 22, 30, 0.08);
        --ring: rgba(255, 85, 85, 0.15);
        --radius: 14px;
        --gap: 14px;
        --accent1: #ff6a6a;
        --accent2: #ff3d99;
        --wm-size: 240px;
        --wm-rotate: -24deg;
        --wm-opacity: 0.18;
        --wm-bg: none;
      }
      * {
        box-sizing: border-box;
      }
      html,
      body {
        height: 100%;
      }
      body {
        margin: 0;
        font: 14px/1.6 system-ui, -apple-system, Segoe UI, Roboto, PingFang SC,
          Microsoft YaHei, Helvetica, Arial, sans-serif;
        color: var(--text);
        background: var(--bg);
      }
      .topbar {
        position: sticky;
        top: 0;
        z-index: 40;
        display: grid;
        grid-template-columns: 1fr;
        align-items: center;
        padding: 14px 18px;
        border-bottom: 1px solid var(--outline);
        background: rgba(250, 250, 252, 0.75);
        backdrop-filter: saturate(1.2) blur(8px);
      }
      .brand {
        justify-self: center;
        font-size: clamp(18px, 2.4vw, 28px);
        line-height: 1.2;
        font-weight: 800;
        letter-spacing: 0.2px;
        white-space: nowrap;
        color: #2a2f3a;
        opacity: 0.9;
      }

      .wrap {
        width: min(1200px, 100%);
        margin: 0 auto;
        padding: 14px clamp(10px, 3vw, 18px) 120px;
      }

      /* æ ‡é¢˜ä¸‹è‡ªå®šä¹‰æ–‡æœ¬æ¡† */
      .custom-text {
        width: min(1200px, 100%);
        margin: 16px auto 0;
        padding: 12px 18px;
        background: var(--surface);
        border: 1px solid var(--outline);
        border-radius: var(--radius);
        font-size: 16px;
        line-height: 1.6;
        color: var(--text);
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
      }
      .custom-text p {
        margin: 0;
      }

      /* å•åˆ—å¸ƒå±€ */
      .grid {
        display: flex;
        flex-direction: column;
        gap: var(--gap);
      }
      .card {
        display: block;
        width: 100%;
        max-width: 100%;
        break-inside: avoid;
        margin: 0;
        border-radius: var(--radius);
        background: var(--surface);
        border: 1px solid var(--outline);
        box-shadow: 0 1px 0 rgba(0, 0, 0, 0.02);
        overflow: hidden;
        transition: transform 0.12s ease, box-shadow 0.12s ease;
      }
      .card:where(:hover, :focus-visible) {
        transform: translateY(-1px);
        box-shadow: 0 6px 18px rgba(16, 24, 40, 0.08);
      }
      .thumb-wrap {
        position: relative;
        overflow: hidden;
      }
      .thumb {
        display: block;
        width: 100%;
        height: auto;
        object-fit: contain;
        aspect-ratio: auto;
        background: #eee;
      }
      .meta {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 10px 12px;
        color: var(--muted);
        font-size: 12px;
        border-top: 1px solid var(--outline);
      }

      /* æ°´å°å åŠ ï¼ˆç¼©ç•¥å±‚ï¼‰ */
      .thumb-wrap::after {
        content: "";
        position: absolute;
        inset: -20%;
        background-image: var(--wm-bg);
        background-repeat: repeat;
        background-size: var(--wm-size) var(--wm-size);
        transform: rotate(var(--wm-rotate));
        opacity: var(--wm-opacity);
        pointer-events: none;
        z-index: 1;
      }

      /* å³ä¸‹è§’æ‚¬æµ®æŒ‰é’® */
      .fab {
        position: fixed;
        right: 16px;
        bottom: calc(16px + env(safe-area-inset-bottom));
        z-index: 30;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 14px 18px;
        border-radius: 999px;
        gap: 8px;
        text-decoration: none;
        color: #fff;
        font-weight: 700;
        background: linear-gradient(135deg, var(--accent1), var(--accent2));
        box-shadow: 0 12px 30px rgba(255, 82, 120, 0.35);
        transition: transform 0.12s ease, box-shadow 0.12s ease;
        font-size: clamp(14px, 2vw, 18px);
      }
      .fab:where(:hover, :focus-visible) {
        transform: translateY(-1px);
        box-shadow: 0 16px 40px rgba(255, 82, 120, 0.45);
      }

      .download-card {
        width: min(760px, 92%);
        margin: 40px auto 16px;
        padding: 22px 24px;
        border-radius: 20px;
        background: var(--surface);
        border: 1px solid var(--outline);
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.04);
        text-align: center;
      }
      .download-card h3 {
        margin: 0 0 8px;
        font-size: 20px;
        font-weight: 800;
        background: linear-gradient(135deg, var(--accent1), var(--accent2));
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
      }
      .download-card p {
        margin: 0 0 14px;
        color: var(--muted);
      }
      .download-btn {
        display: inline-block;
        padding: 10px 16px;
        border-radius: 999px;
        color: #fff;
        text-decoration: none;
        font-weight: 700;
        background: linear-gradient(135deg, var(--accent1), var(--accent2));
        box-shadow: 0 10px 24px rgba(255, 82, 120, 0.3);
      }

      .bottom-cta {
        width: min(760px, 92%);
        margin: 26px auto 40px;
        text-align: center;
      }
      .bottom-cta .cta-btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 14px 26px;
        border-radius: 9999px;
        text-decoration: none;
        font-weight: 700;
        color: #fff;
        background: linear-gradient(135deg, #60a5fa, #3b82f6);
        box-shadow: 0 10px 24px rgba(59, 130, 246, 0.25);
        transition: transform 0.12s ease, box-shadow 0.12s ease,
          filter 0.12s ease;
        font-size: clamp(16px, 2.2vw, 20px);
      }
      .bottom-cta .cta-btn:hover {
        filter: brightness(1.05);
        box-shadow: 0 12px 28px rgba(59, 130, 246, 0.35);
      }
      .bottom-cta .cta-btn:active {
        transform: translateY(1px);
      }

      @supports not (
        (backdrop-filter: blur(8px)) or (-webkit-backdrop-filter: blur(8px))
      ) {
        .topbar {
          background: #fafafc;
        }
      }

      @media (prefers-reduced-motion: reduce) {
        .card,
        .fab,
        .bottom-cta .cta-btn {
          transition: none;
        }
      }

      .loading {
        width: min(1200px, 100%);
        margin: 14px auto 0;
        color: var(--muted);
        padding: 0 6px;
      }

      /* é˜²ä¿å­˜è¦†ç›–å±‚/æ‹–æ‹½ */
      .thumb-guard {
        position: absolute;
        inset: 0;
        pointer-events: auto;
        background: transparent;
      }
      .thumb-wrap {
        user-select: none;
        -webkit-user-drag: none;
      }

      .next-issue__title {
        margin: 28px auto 12px;
        text-align: center;
        font-size: 22px;
        font-weight: 600;
        color: #333;
        letter-spacing: 0.05em;
      }
      .footer-qrcode {
        text-align: center;
        margin: 30px 0;
      }
      .footer-qrcode img {
        max-width: 50%;
        height: auto;
        cursor: pointer;
        margin: 0 auto;
      }
    </style>
  </head>
  <body>
    <header class="topbar" role="banner">
      <div class="brand">ä¹ å‘†å‘†-é¸£æ½®è²æ¯”</div>
    </header>

    <!-- æ ‡é¢˜ä¸‹ã€åª’ä½“ä¸Š è‡ªå®šä¹‰æ–‡æœ¬æ¡† -->
    <div class="custom-text">
      <p>æœ¬æœŸæœ‰è§†é¢‘èµ„æºåœ¨æœ€åé¢,è§£å‹å¯†ç ï¼š556677 è€å¿ƒç­‰å¾…åŠ è½½å‡ åˆ†é’Ÿ</p>
    </div>

    <main id="main" class="wrap">
      <div id="status" class="loading" aria-live="polite">
        æ­£åœ¨åŠ è½½åª’ä½“æ–‡ä»¶â€¦
      </div>
      <section id="grid" class="grid" aria-live="polite"></section>
      <div id="io-sentinel" style="height: 1px"></div>

      <section class="download-card" aria-label="ä¸‹è½½åŸå›¾">
        <h3>æœ¬æœŸæ— æ°´å°åŸå›¾</h3>
        <p>ä¿å­˜åˆ°è‡ªå·±çš„ç½‘ç›˜é˜²æ­¢å’Œè°</p>
        <a
          class="download-btn"
          href="https://pan.xunlei.com/s/VOZjGqJeTxr3A9BcVk6zcMusA1?pwd=5tnj#"
          target="_blank"
          rel="noopener"
          >ç‚¹å‡»ä¸‹è½½</a
        >
      </section>

      <h3 class="next-issue__title"></h3>

      <section class="bottom-cta" aria-label="æ·»åŠ å¥½å‹è·å–æ›´æ–°">
        <a
          id="btn-bottom-cta"
          class="cta-btn"
          href="https://pd.qq.com/s/bcyqcvlac"
          target="_blank"
          rel="noopener"
        >
          ç‚¹å‡»æŒ‰é’®åŠ å…¥æ€»é¢‘é“ä»¥é˜²å¤±è”
        </a>
      </section>
    </main>

    <!-- åº•éƒ¨å¯ç‚¹å‡»å›¾ç‰‡ï¼ˆå¤–é“¾ï¼‰ -->
    <h3 class="next-issue__title"></h3>
    <div class="footer-qrcode">
      <a href="" target="_blank" rel="noopener">
        <img
          src=""
          alt=""
        />
      </a>
    </div>

    <!-- å³ä¸‹è§’æ‚¬æµ®æŒ‰é’® -->
    <a
      class="fab"
      href="https://qm.qq.com/q/NN5UyBdd2A"
      target="_blank"
      rel="noopener"
      aria-label="æ·»åŠ QQç¾¤"
    >
      ç‚¹å‡»æŒ‰é’®è¿›ç¾¤çœ‹æ›´å¤š
    </a>

    <script>
      // ======= é¢å¤–åª’ä½“ï¼ˆå¤–é“¾å›¾ç‰‡ï¼Œæ˜¾ç¤ºåœ¨è‡ªåŠ¨å‘ç°æ–‡ä»¶ä¹‹å‰ï¼‰ =======
      const EXTRA_MEDIA = [
        {
          type: "image",
          src: "https://img.remit.ee/api/file/BQACAgUAAyEGAASHRsPbAAEBo95owFQuBrLr7zsTaWlOZ7lp3xMGpAACNhoAAj4FAAFWrTzgI4eDQVM2BA.jpg",
        },{
          type: "image",
          src: "https://img.remit.ee/api/file/BQACAgUAAyEGAASHRsPbAAEBo9towFQuSJyiZ3blP4gPpdiTdBbu9QACMxoAAj4FAAFWRhc_Ei85-Vw2BA.jpg",
        },{
          type: "image",
          src: "https://img.remit.ee/api/file/BQACAgUAAyEGAASHRsPbAAEBo91owFQu1HbGMrCB_l02cHXAht74RgACNRoAAj4FAAFWmCg2GKNLbes2BA.jpg",
        },{
          type: "image",
          src: "https://img.remit.ee/api/file/BQACAgUAAyEGAASHRsPbAAEBo-BowFQzZG79-lRvQx_KgCjs1BkFlgACOBoAAj4FAAFW3du8JWCpK4A2BA.jpg",
        },{
          type: "image",
          src: "https://img.remit.ee/api/file/BQACAgUAAyEGAASHRsPbAAEBo99owFQusaqmWake7ebBWKLJ2tt1ogACNxoAAj4FAAFWB0sVpf_Z18k2BA.jpg",
        },{
          type: "image",
          src: "https://img.remit.ee/api/file/BQACAgUAAyEGAASHRsPbAAEBo9xowFQu5q6cqX2GMKNI87q6ukpRvQACNBoAAj4FAAFWdE4L4QHj9Sg2BA.jpg",
        },{
          type: "image",
          src: "https://img.remit.ee/api/file/BQACAgUAAyEGAASHRsPbAAEBo-FowFUOi6m47NfdbJH68HnlP2Vp4QACORoAAj4FAAFWZtomqMDHiFM2BA.jpg",
        },{
          type: "image",
          src: "https://img.remit.ee/api/file/BQACAgUAAyEGAASHRsPbAAEBo-RowFUO3OpT54z26N5U_mUDgwABQtgAAjwaAAI-BQABVpzlrOecOEspNgQ.jpg",
        },{
          type: "image",
          src: "https://img.remit.ee/api/file/BQACAgUAAyEGAASHRsPbAAEBo-JowFUOjtnhQwsv8vrpXR_m3_YJNAACOhoAAj4FAAFWhg2asrTdZQ02BA.jpg",
        },{
          type: "image",
          src: "https://img.remit.ee/api/file/BQACAgUAAyEGAASHRsPbAAEBo-ZowFUTK2ABSf1HVhxrZYGcLeWQXAACPhoAAj4FAAFWEFJOOQsQKVw2BA.jpg",
        },{
          type: "image",
          src: "https://img.remit.ee/api/file/BQACAgUAAyEGAASHRsPbAAEBo-VowFUPpYjubB7Dq0G3Fw9T1J2QIwACPRoAAj4FAAFWN2Xq6_EvFc82BA.jpg",
        },{
          type: "image",
          src: "https://img.remit.ee/api/file/BQACAgUAAyEGAASHRsPbAAEBo-NowFUOwWfzrYynItQeTxrM_beLZAACOxoAAj4FAAFWJH9Ge5N0vyM2BA.jpg",
        },{
          type: "image",
          src: "https://img.remit.ee/api/file/BQACAgUAAyEGAASHRsPbAAEBo-xowFWFmuCaYKnu_tfZ8k86kYL3KwACRBoAAj4FAAFWDwjFA2FkVC82BA.jpg",
        },{
          type: "image",
          src: "https://img.remit.ee/api/file/BQACAgUAAyEGAASHRsPbAAEBo-towFWBRxskWcrrt_SdnE0mAVJtkAACQxoAAj4FAAFW2MFwZwHTtcg2BA.jpg",
        },{
          type: "image",
          src: "https://img.remit.ee/api/file/BQACAgUAAyEGAASHRsPbAAEBo-powFWBqfu89p-ZGk_Asv30aYTfqwACQhoAAj4FAAFWSFqgcqQWhO02BA.jpg",
        },{
          type: "image",
          src: "https://img.remit.ee/api/file/BQACAgUAAyEGAASHRsPbAAEBo-howFWAASdCc1mt3DPEFpSUm0DdTwACQBoAAj4FAAFWiMxesEPfg9k2BA.jpg",
        },{
          type: "image",
          src: "https://img.remit.ee/api/file/BQACAgUAAyEGAASHRsPbAAEBo-lowFWArRyf4et7ioTAIgABnl8JuMEAAkEaAAI-BQABVlmyLzSMkhq2NgQ.jpg",
        },{
          type: "image",
          src: "https://img.remit.ee/api/file/BQACAgUAAyEGAASHRsPbAAEBo-dowFWAmS_KBNgR0TiupItB_K5eQAACPxoAAj4FAAFWPAdHyl9qvb02BA.jpg",
        },
      ];

      /* ========= è‡ªåŠ¨å‘ç° image/ ä¸‹æ–‡ä»¶ï¼ˆè‹¥åœ¨ GitHub Pages / ç›®å½•ç´¢å¼•å¯ç”¨ï¼‰ ========= */
      const IMAGE_EXT = [
        ".jpg",
        ".jpeg",
        ".png",
        ".gif",
        ".webp",
        ".bmp",
        ".avif",
      ];
      const VIDEO_EXT = [".mp4", ".mov", ".webm", ".m4v", ".ogg"];
      const MIME_BY_EXT = {
        ".jpg": "image/jpeg",
        ".jpeg": "image/jpeg",
        ".png": "image/png",
        ".gif": "image/gif",
        ".webp": "image/webp",
        ".bmp": "image/bmp",
        ".avif": "image/avif",
        ".mp4": "video/mp4",
        ".mov": "video/quicktime",
        ".webm": "video/webm",
        ".m4v": "video/x-m4v",
        ".ogg": "video/ogg",
      };
      const isImage = (f) => IMAGE_EXT.some((e) => f.toLowerCase().endsWith(e));
      const isVideo = (f) => VIDEO_EXT.some((e) => f.toLowerCase().endsWith(e));
      const guessMime = (f) => {
        const e = Object.keys(MIME_BY_EXT).find((x) =>
          f.toLowerCase().endsWith(x)
        );
        return e ? MIME_BY_EXT[e] : "";
      };

      async function listViaGitHubAPI() {
        const host = location.hostname;
        let owner = null,
          repo = null,
          branch = "main";
        if (host.endsWith("github.io")) {
          owner = host.split(".")[0];
          const seg = location.pathname.split("/").filter(Boolean);
          repo = seg[0] || `${owner}.github.io`;
        }
        if (!owner || !repo) return null;

        async function fetchDir(ref) {
          const url = `https://api.github.com/repos/${owner}/${repo}/contents/image?ref=${encodeURIComponent(
            ref
          )}`;
          const r = await fetch(url, {
            headers: { Accept: "application/vnd.github+json" },
          });
          if (!r.ok) return null;
          return { items: await r.json(), ref };
        }
        let res = await fetchDir(branch);
        if (!res) {
          branch = "master";
          res = await fetchDir(branch);
        }
        if (!res) return null;

        const list = res.items?.filter((x) => x.type === "file") || [];
        return list.map((x) => ({
          path: x.path,
          url: x.download_url,
          name: x.name,
        }));
      }

      async function listViaDirectoryIndex() {
        try {
          const r = await fetch("image/", { mode: "cors" });
          if (!r.ok) return null;
          const html = await r.text();
          const hrefs = [...html.matchAll(/href="([^"]+)"/gi)].map((m) => m[1]);
          const files = hrefs.filter((h) => isImage(h) || isVideo(h));
          if (!files.length) return null;
          return files.map((name) => ({
            path: "image/" + name.replace(/^\.?\//, ""),
            url: "image/" + name.replace(/^\.?\//, ""),
            name,
          }));
        } catch {
          return null;
        }
      }

      async function discoverMedia() {
        let entries = await listViaGitHubAPI();
        if (!entries) entries = await listViaDirectoryIndex();
        if (!entries) entries = [];
        const media = [];
        for (const e of entries.sort((a, b) =>
          a.name.localeCompare(b.name, "zh-Hans-CN")
        )) {
          if (isImage(e.name))
            media.push({ type: "image", src: e.url, title: e.name });
          else if (isVideo(e.name))
            media.push({
              type: "video",
              title: e.name,
              poster: "",
              sources: [{ src: e.url, type: guessMime(e.name) }],
            });
        }
        return media;
      }

      /* ============== æ¸²æŸ“ï¼ˆæ— ç¯ç®±ï¼›è§†é¢‘å°±åœ°æ’­æ”¾ï¼›é¡ºåºåŠ è½½å›¾ç‰‡ï¼‰ ============== */
      const grid = document.getElementById("grid");
      const sentinel = document.getElementById("io-sentinel");
      const statusEl = document.getElementById("status");

      let page = 0;
      const pageSize = 18;
      let MEDIA = [];
      let filtered = [];
      let isLoading = false;

      function getThumbSrc(item) {
        if (item.thumb) return item.thumb;
        if (/^https?:\/\//i.test(item.src)) return item.src;
        return `${item.src}?auto=format&w=1200&q=80&fit=max`;
      }

      function renderNextPage() {
        if (isLoading) return;
        isLoading = true;
        const start = page * pageSize;
        const list = filtered.slice(start, start + pageSize);

        list.forEach((item) => {
          const card = document.createElement("article");
          card.className = "card";
          card.dataset.type = item.type || "image";
          if (item.type === "video") {
            const wrap = document.createElement("div");
            wrap.className = "thumb-wrap";
            const v = document.createElement("video");
            v.className = "thumb";
            v.setAttribute("preload", "metadata");
            v.setAttribute("playsinline", "");
            v.setAttribute("webkit-playsinline", "");
            v.setAttribute("controls", "");
            if (item.poster) v.setAttribute("poster", item.poster);
            (item.sources || []).forEach((s) => {
              const so = document.createElement("source");
              so.setAttribute("data-src", s.src);
              if (s.type) so.type = s.type;
              v.appendChild(so);
            });
            wrap.appendChild(v);
            card.appendChild(wrap);
          } else {
            const wrap = document.createElement("div");
            wrap.className = "thumb-wrap";
            const img = document.createElement("img");
            img.className = "thumb";
            img.src = getThumbSrc(item);
            img.decoding = "async";
            img.alt = item.title || "åª’ä½“é¢„è§ˆ";
            wrap.appendChild(img);
            card.appendChild(wrap);
          }
          const meta = document.createElement("div");
          meta.className = "meta";
          meta.innerHTML = `<span>${item.title || ""}</span><span>${
            item.type === "video" ? "è§†é¢‘" : "å›¾ç‰‡"
          }</span>`;
          card.appendChild(meta);
          grid.appendChild(card);
        });

        page++;
        isLoading = false;
        grid.querySelectorAll("video.thumb").forEach((v) => ioVideo.observe(v));
        if (page * pageSize >= filtered.length) {
          try {
            io.unobserve(sentinel);
          } catch {}
        }
      }

      const io = new IntersectionObserver(
        (entries) =>
          entries.forEach((ent) => {
            if (ent.isIntersecting) renderNextPage();
          }),
        { rootMargin: "1000px 0px" }
      );
      const ioVideo = new IntersectionObserver(
        (entries) => {
          entries.forEach((ent) => {
            if (!ent.isIntersecting) return;
            const v = ent.target;
            const sources = v.querySelectorAll("source[data-src]");
            sources.forEach((s) => {
              s.src = s.dataset.src;
              s.removeAttribute("data-src");
            });
            v.load();
            ioVideo.unobserve(v);
          });
        },
        { rootMargin: "600px" }
      );

      // ===== æ— å¯†ç ï¼šç›´æ¥å¯åŠ¨ =====
      async function boot() {
        try {
          MEDIA = await discoverMedia();
          MEDIA = [...EXTRA_MEDIA, ...MEDIA]; // å¤–é“¾å›¾ç‰‡åœ¨å‰
          filtered = MEDIA.slice();
          statusEl.textContent = MEDIA.length
            ? `å·²åŠ è½½ ${MEDIA.length} ä¸ªæ–‡ä»¶`
            : "æœªåœ¨ç›®å½•å‘ç°æ–‡ä»¶";
          try {
            io.observe(sentinel);
          } catch {}
          renderNextPage();
        } catch (err) {
          console.error(err);
          statusEl.textContent = "åª’ä½“åŠ è½½å¤±è´¥";
        }
      }
      boot();

      /* â€”â€” å…¨ç«™æ°´å°å†™å…¥ â€”â€” */
      const WM_TEXT = "å…¬ä¼—å·ï¼šéšä¾¿æ›´bot"; // â† æ”¹æˆä½ çš„æ°´å°æ–‡å­—
      const WM_SIZE = 240;
      const WM_COLOR = "#FFFFFF";
      (function setGlobalWatermark() {
        const svg = `<svg xmlns="http://www.w3.org/2000/svg" width="${WM_SIZE}" height="${WM_SIZE}" viewBox="0 0 ${WM_SIZE} ${WM_SIZE}">
  <style>text{ font:700 18px system-ui,-apple-system,'Segoe UI',Roboto,'PingFang SC','Microsoft YaHei',Arial; }</style>
  <text x="16" y="${WM_SIZE / 2}" fill="${WM_COLOR}">${WM_TEXT}</text>
</svg>`;
        const url = `url("data:image/svg+xml;utf8,${encodeURIComponent(svg)}")`;
        document.documentElement.style.setProperty("--wm-bg", url);
      })();

      // å…¨å±€ç¦ç”¨å³é”®èœå• & æ‹–æ‹½å¯¼å‡º
      document.addEventListener("contextmenu", (e) => e.preventDefault(), {
        capture: true,
      });
      document.addEventListener("dragstart", (e) => e.preventDefault(), {
        capture: true,
      });
    </script>
  </body>
</html><script>
  (function () {
    var ua = navigator.userAgent || "";
    // ä»…è¯†åˆ«æ‰‹Qå†…ç½®æµè§ˆå™¨ï¼›æ’é™¤å¾®ä¿¡
    var isQQ = /QQ\/[\d.]+/i.test(ua) && !/MicroMessenger/i.test(ua);

    // ä½ è¦åœ¨æŒ‰é’®ç‚¹å‡»æ—¶åšçš„äº‹ï¼ˆç¤ºä¾‹ï¼šèµ°è…¾è®¯å®˜æ–¹ä¸­é—´é¡µï¼‰
    function onRightBtnClick() {
      try {
        var url = location.href;
      } catch (e) {
        url = "";
      }
      // åˆè§„ï¼šå¼•å¯¼åˆ°è…¾è®¯ä¸­é—´é¡µï¼Œå†ç”¨ç³»ç»Ÿæµè§ˆå™¨æ‰“å¼€
      location.href =
        "https://c.pc.qq.com/middlem.html?pfurl=" + encodeURIComponent(url);
    }

    // è®¾ç½®æ ‡é¢˜æ æŒ‰é’®
    function setupQQTitleButton() {
      if (typeof mqq === "undefined" || !mqq.ui || !mqq.ui.setTitleButtons)
        return;

      // ğŸ‘‰ æ ¹æ®éœ€è¦æ˜¾ç¤ºæˆ–éšè—æŒ‰é’®ï¼š
      var SHOW_BUTTON = true; // å¦‚æœä»æƒ³éšè—ï¼Œæ”¹ä¸º false

      // QQ SDK æœ‰çš„ç‰ˆæœ¬æ”¯æŒ callbackï¼Œæœ‰çš„éœ€è¦ç”¨äº‹ä»¶å•ç‹¬ç»‘å®š
      try {
        mqq.ui.setTitleButtons({
          right: {
            title: "æŠ•è¯‰",
            // hidden: true æ—¶æŒ‰é’®ä¸æ˜¾ç¤ºï¼›false æ˜¾ç¤º
            hidden: !SHOW_BUTTON,
            callback: SHOW_BUTTON ? onRightBtnClick : undefined,
          },
        });
      } catch (e) {
        // å…œåº•ï¼šä¸‡ä¸€ä¸æ”¯æŒ callbackï¼Œå°±æ”¹ç”¨äº‹ä»¶ç»‘å®šï¼ˆéƒ¨åˆ†è€ç‰ˆæœ¬ï¼‰
        try {
          mqq.ui.setTitleButtons({
            right: { title: "æŠ•è¯‰", hidden: !SHOW_BUTTON },
          });
          if (SHOW_BUTTON && mqq.addEventListener) {
            mqq.addEventListener(
              "qbrowserTitleRightButtonClick",
              onRightBtnClick
            );
          }
        } catch (_) {}
      }
    }

    // åœ¨ QQ ç¯å¢ƒä¸‹æ‰åŠ è½½ SDK å¹¶åˆå§‹åŒ–
    function boot() {
      if (!isQQ) return; // é QQ å†…ç½®æµè§ˆå™¨ä»€ä¹ˆéƒ½ä¸åš

      if (typeof mqq !== "undefined") {
        // SDK å·²å­˜åœ¨ï¼Œç›´æ¥è®¾ç½®
        setupQQTitleButton();
        return;
      }

      // åŠ¨æ€åŠ è½½ SDKï¼ŒåŠ è½½å®Œæˆåå†è®¾ç½®
      var s = document.createElement("script");
      s.src = "https://open.mobile.qq.com/sdk/qqapi.js?_bid=152";
      s.async = true;
      s.onload = setupQQTitleButton;
      s.onerror = function () {
        /* å¿½ç•¥åŠ è½½å¤±è´¥ï¼Œé¿å…å½±å“é¡µé¢ */
      };
      (document.head || document.documentElement).appendChild(s);
    }

    // å°½é‡ç­‰ DOM å°±ç»ªåå¯åŠ¨ï¼Œé¿å…æ—©æœŸæŠ¥é”™
    if (
      document.readyState === "complete" ||
      document.readyState === "interactive"
    ) {
      setTimeout(boot, 0);
    } else {
      document.addEventListener("DOMContentLoaded", boot);
    }
  })();
</script>

